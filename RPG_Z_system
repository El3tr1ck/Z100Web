<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gerador Hexagonal</title>

<style>
:root{
--bg:#f8fafc;
--card:#ffffff;
--primary:#0284c7;
--bonus:#16a34a;
--text:#0f172a;
--muted:#64748b;
}

body{
margin:0;
font-family:Segoe UI, sans-serif;
background:var(--bg);
display:flex;
justify-content:center;
padding:30px;
color:var(--text);
}

.card{
background:var(--card);
width:100%;
max-width:950px;
border-radius:20px;
padding:30px;
box-shadow:0 10px 30px rgba(0,0,0,0.08);
}

h1{text-align:center;}

input{
width:100%;
padding:8px;
border-radius:8px;
border:1px solid #cbd5e1;
margin-bottom:10px;
}

button{
padding:10px;
border:none;
border-radius:10px;
cursor:pointer;
font-weight:600;
}

.generate{
width:100%;
background:var(--primary);
color:white;
margin-top:15px;
}

.nature-grid{
display:grid;
grid-template-columns:1fr 1fr;
gap:10px;
margin-bottom:15px;
}

.nature-btn{
background:#e2e8f0;
padding:10px;
border-radius:12px;
text-align:center;
cursor:pointer;
}

.nature-btn.selected{
background:var(--primary);
color:white;
}

.warning{
background:#fee2e2;
color:#991b1b;
padding:10px;
border-radius:10px;
display:none;
margin-bottom:10px;
}

.hidden{display:none;}

.toggle{
cursor:pointer;
margin-top:10px;
font-weight:600;
color:var(--primary);
}

.optional-box{
display:none;
margin-top:10px;
padding:10px;
border:1px solid #cbd5e1;
border-radius:10px;
}

svg{
width:100%;
height:520px;
margin-bottom:20px;
}

.legend{
display:flex;
gap:20px;
margin-bottom:15px;
font-size:14px;
}

.dot{
width:14px;
height:14px;
border-radius:50%;
display:inline-block;
margin-right:6px;
}

.bar-wrapper{
margin-bottom:14px;
}

.bar{
width:100%;
height:20px;
background:#e2e8f0;
border-radius:10px;
position:relative;
overflow:hidden;
}

.base{
height:100%;
background:var(--primary);
position:absolute;
left:0;
top:0;
}

.extra{
height:100%;
background:var(--bonus);
position:absolute;
top:0;
}
</style>
</head>

<body>
<div class="card">

<div id="formSection">
<h1>Gerador de Natureza</h1>

<input id="nome" placeholder="Nome">
<input id="idade" type="number" placeholder="Idade">

<div class="nature-grid" id="natureButtons"></div>

<div class="warning" id="warningBox">
Máximo 2 naturezas.
</div>

<div class="toggle" onclick="toggleOptional()">▶ Avanços (Opcional)</div>

<div class="optional-box" id="optionalBox">

<p>Dado (1 a 6): <strong id="diceResult">-</strong></p>
<button onclick="rollDice()">Rolar Dado</button>

<input id="forcaExtra" type="number" placeholder="Força extra">
<input id="agiExtra" type="number" placeholder="Agilidade extra">
<input id="velExtra" type="number" placeholder="Velocidade extra">
<input id="resExtra" type="number" placeholder="Resistência extra">
<input id="pbExtra" type="number" placeholder="Poder Bruto extra">

</div>

<button class="generate" id="generateBtn" onclick="generate()" disabled>Gerar</button>
</div>

<div id="resultSection" class="hidden">
<h1>Resultado</h1>
<svg id="radar" viewBox="0 0 400 400"></svg>

<div class="legend">
<span><span class="dot" style="background:var(--primary)"></span>Base Gerada</span>
<span><span class="dot" style="background:var(--bonus)"></span>Avanços (Dado + Manual)</span>
</div>

<div id="attributes"></div>

<button class="generate" onclick="location.reload()">Refazer</button>
</div>

</div>

<script>
const natureNames=[
"Potencializador",
"Energizador",
"Liberador",
"Encantador",
"Espiritualista",
"Criador"
];

let selected=[];
let seed;
let diceValue=0;

function createSeed(name){
let sum=0;
name=name.toUpperCase();
for(let c of name){
sum+=c.charCodeAt(0);
}
return sum;
}

function seededRandom(){
seed=(seed*9301+49297)%233280;
return seed/233280;
}

function setupButtons(){
const container=document.getElementById("natureButtons");
natureNames.forEach((name,i)=>{
const btn=document.createElement("div");
btn.className="nature-btn";
btn.innerText=name;
btn.onclick=()=>{
if(btn.classList.contains("selected")){
btn.classList.remove("selected");
selected=selected.filter(v=>v!==i);
}else{
if(selected.length>=2){
document.getElementById("warningBox").style.display="block";
return;
}
btn.classList.add("selected");
selected.push(i);
document.getElementById("warningBox").style.display="none";
}
checkReady();
};
container.appendChild(btn);
});
}

function checkReady(){
const nome=document.getElementById("nome").value;
const idade=document.getElementById("idade").value;
document.getElementById("generateBtn").disabled=!(nome && idade && selected.length>=1);
}

document.getElementById("nome").oninput=checkReady;
document.getElementById("idade").oninput=checkReady;

function toggleOptional(){
const box=document.getElementById("optionalBox");
box.style.display=box.style.display==="block"?"none":"block";
}

function rollDice(){
diceValue=Math.floor(Math.random()*6)+1;
document.getElementById("diceResult").innerText=diceValue;
}

function generate(){

seed=createSeed(document.getElementById("nome").value);

let values=new Array(6).fill(0);
selected.forEach(i=>values[i]=100);

if(selected.length==1 && seededRandom()<0.08){
let extra=Math.floor(seededRandom()*6);
while(extra===selected[0]){
extra=Math.floor(seededRandom()*6);
}
values[extra]=100;
}

for(let i=0;i<6;i++){
if(values[i]!==100){
values[i]=20+Math.floor(seededRandom()*60);
if(values[i]>=95) values[i]=85;
}
}

drawRadar(values);
generateAttributes(values);

document.getElementById("formSection").classList.add("hidden");
document.getElementById("resultSection").classList.remove("hidden");
}

function drawRadar(values){
const svg=document.getElementById("radar");
svg.innerHTML="";
const center=200;
const radius=150;

for(let l=1;l<=5;l++){
let r=(radius/5)*l;
let pts="";
for(let i=0;i<6;i++){
let a=(Math.PI*2/6)*i-Math.PI/2;
let x=center+r*Math.cos(a);
let y=center+r*Math.sin(a);
pts+=x+","+y+" ";
}
let poly=document.createElementNS("http://www.w3.org/2000/svg","polygon");
poly.setAttribute("points",pts);
poly.setAttribute("fill","none");
poly.setAttribute("stroke","#cbd5e1");
svg.appendChild(poly);
}

let pts="";
for(let i=0;i<6;i++){
let a=(Math.PI*2/6)*i-Math.PI/2;
let r=radius*(values[i]/100);
let x=center+r*Math.cos(a);
let y=center+r*Math.sin(a);
pts+=x+","+y+" ";
}
let poly=document.createElementNS("http://www.w3.org/2000/svg","polygon");
poly.setAttribute("points",pts);
poly.setAttribute("fill","rgba(2,132,199,0.4)");
poly.setAttribute("stroke","#0284c7");
poly.setAttribute("stroke-width","2");
svg.appendChild(poly);

for(let i=0;i<6;i++){
let a=(Math.PI*2/6)*i-Math.PI/2;
let x=center+(radius+25)*Math.cos(a);
let y=center+(radius+25)*Math.sin(a);
let text=document.createElementNS("http://www.w3.org/2000/svg","text");
text.setAttribute("x",x);
text.setAttribute("y",y);
text.setAttribute("text-anchor","middle");
text.setAttribute("font-size","12");
text.textContent=natureNames[i]+" "+values[i]+"%";
svg.appendChild(text);
}
}

function generateAttributes(values){

let base={
"Força":Math.floor(seededRandom()*6)+3,
"Agilidade":Math.floor(seededRandom()*6)+3,
"Velocidade":Math.floor(seededRandom()*6)+3,
"Resistência":Math.floor(seededRandom()*6)+3,
"Poder Bruto":Math.floor(seededRandom()*6)+3
};

if(values[0]==100) base["Poder Bruto"]+=2;
if(values[1]==100) base["Velocidade"]+=2;
if(values[2]==100) base["Força"]+=2;
if(values[3]==100) base["Agilidade"]+=2;
if(values[4]==100) base["Resistência"]+=2;
if(values[5]==100){base["Agilidade"]+=1;base["Poder Bruto"]+=1;}

for(let k in base){
while(base[k]>9){
base[k]=Math.floor(base[k]/2);
}
}

let manual={
"Força":parseInt(document.getElementById("forcaExtra").value)||0,
"Agilidade":parseInt(document.getElementById("agiExtra").value)||0,
"Velocidade":parseInt(document.getElementById("velExtra").value)||0,
"Resistência":parseInt(document.getElementById("resExtra").value)||0,
"Poder Bruto":parseInt(document.getElementById("pbExtra").value)||0
};

let totals={};
let maxValue=0;

for(let k in base){
totals[k]=base[k]+manual[k]+diceValue;
if(totals[k]>maxValue) maxValue=totals[k];
}

let container=document.getElementById("attributes");
container.innerHTML="";

for(let k in base){

let baseWidth=(base[k]/maxValue)*100;
let extraWidth=((manual[k]+diceValue)/maxValue)*100;

container.innerHTML+=`
<div class="bar-wrapper">
<strong>${k}: ${base[k]} + ${manual[k]+diceValue}</strong>
<div class="bar">
<div class="base" style="width:${baseWidth}%"></div>
<div class="extra" style="left:${baseWidth}%; width:${extraWidth}%"></div>
</div>
</div>
`;
}
}

setupButtons();
</script>
</body>
</html>
